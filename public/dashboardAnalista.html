<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/dashAnalista.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="js/sessao.js"></script>
</head>

<body>

    <nav class="menu">
        <input type="checkbox" name="chk_hamburguer" id="chk_hamburguer" class="check_hamburguer">

        <section class="hamburguer">
            <span class="menu_lateral">
                <div class="icones_topo">
                    <img class="img_hamb" src="assets/LogoVitalView.png" alt="">
                    <img src="./assets/dashboard-icons/layout.svg" alt="">
                    <img src="./assets/dashboard-icons/activity.svg" alt="">
                    <img src="./assets/dashboard-icons/calendar.svg" alt="">
                    <img src="./assets/dashboard-icons/bar-chart.svg" alt="">
                </div>

                <div class="icones_baixo">
                    <img src="./assets/dashboard-icons/settings.svg" alt="">
                    <img src="./assets/dashboard-icons/users.svg" alt="">
                    <img src="./assets/dashboard-icons/help-circle.svg" alt="">
                    <img src="./assets/dashboard-icons/log-out.svg" alt="">
                </div>
            </span>
        </section>

        <ul>
            <div class="title_hamb">
                <img class="img_hamb" src="assets/LogoVitalView.png" alt="">
                <h2 class="hamb_nome">VitalView</h2>
            </div>
            <div class="menu_topo">
                <h3 class="title_menu">Dashboards</h3>
                <li>
                    <a href="dashboardAnalista.html"> Dash Analista </a>
                </li>
                <li>
                    <a href="dashboardSuporteMacro.html"> Dash Suporte Macro</a>
                </li>
                <li>
                    <a href="dashboardSuporteMicro.html"> Dash Suporte Micro</a>
                </li>

            </div>

            <div class="menu_baixo">
                <h3 class="title_menu">Outras Opções</h3>
                <li>
                    <a href="cadastro.html"> Cadastro Funcionário </a>
                </li>
                <li>
                    <a href="cadastroserver.html"> Cadastro Servidores </a>
                </li>
                <li>
                    <a target="_blank"> Central de Serviço </a>
                </li>
                <li>
                    <a onclick="limparSessao()"> Sair </a>
                </li>
            </div>
        </ul>
    </nav>


    <section class="container">
        <section class="nav-dash">
            <section class="secao_logo">
                <a href="dashboardAnalista.html">
                    <img src="assets/LogoVitalView.png" alt="Logo VitalView" class="logo">
                </a>
            </section>

            <section class="secao_logo">
                <h1 class="titulo_header">VitalView</h1>
            </section>

            <section class="secao_logo">
                <select class="periodo_select" name="periodo" id="periodo_select">
                    <option value="1">Escolher Servidor</option>
                    <option value="2">Servidor 1</option>
                    <option value="3">Servidor 2</option>
                    <option value="4">Servidor 3</option>
                    <option value="5">Servidor 4</option>
                    <option value="6">Servidor 5</option>
                </select>
            </section>

            <section class="secao_logo">
                <select class="periodo_select" name="periodo" id="periodo_select">
                    <option value="1">Escolher periodo</option>
                    <option value="2">Todos os registros</option>
                    <option value="3">Último ano</option>
                    <option value="4">Últimos 6 meses</option>
                    <option value="5">Últimos 30 dias</option>
                    <option value="6">Última semana</option>
                </select>
            </section>

            <section class="data-hora">
                <button>1min</button>
                <button>10min</button>
                <button>1h</button>
                <button>24h</button>
                <button>7d</button>
            </section>
        </section>

        <section class="container-de-sessoes">
            <section class="sessao-lateral-esquerda">
                <div class="server-info" role="group" aria-labelledby="t1">
                    <h3 id="t1" class="titulo-cartao">Top 5 Servidores com mais alertas <small>No [Período]</small>
                    </h3>
                    <div class="wrap-canvas">
                        <canvas id="topServidoresChart" aria-label="Top servidores" role="img"></canvas>
                    </div>
                </div>
                <div class="server-info" role="group" aria-labelledby="t2">
                    <h3 id="t1" class="titulo-cartao">Distribuição de alertas por componente
                        <small>No [Período]</small>
                    </h3>
                    <div class="wrap-canvas">
                        <canvas id="componentesChart" aria-label="Alertas por componente" role="img"></canvas>
                    </div>
                </div>

                <button class="botao-relatorio">Gerar Relatório</button>

            </section>
            <section class="sessao-lateral-direita">
                <section class="sessao-lateral-direita-itens">
                    <section class="velocimetro card">
                        <h4 id="c1">SLA/Disponibilidade <small>Durante o [Período]</small></h4>
                        <div class="valor grande verde">99.85% <span class="seta">▲</span></div>
                        <p class="legenda">Tempo que os servidores ficaram disponíveis</p>
                    </section>
                    <section class="velocimetro card">
                        <h4 id="c2">Servidor com mais alerta <small>Durante o [Período]</small></h4>
                        <div class="valor grande vermelho">SERV-PACS</div>
                        <p class="legenda">RAM – 27 Alertas</p>
                    </section>
                    <section class="velocimetro card" id="uptime">
                        <div class="uptime">
                            <h4 id="c3">MTTR <small>Durante o [Período]</small></h4>
                            <div class="valor grande vermelho">2.5h</div>
                            <p class="legenda">Tempo médio de resolução de Incidentes</p>
                        </div>
                        </div>
                    </section>
                </section>
                <section class="sessao-lateral-direita-itens" id="id_sessao_direita_2">
                    <section class="row" id="grafico_disco">
                        <div class="card card_grafico_disco" id="graficoPizza">
                            <div aria-labelledby="qtd">
                                <h4 id="qtd">Quantidade total de alertas <small>Durante o [Período]</small></h4>
                                <div class="valor enorme vermelho">12</div>
                            </div>
                        </div>
                    </section>
                    <section id="projecao">
                        <div aria-labelledby="lin">
                            <h4 id="lin">Distribuição de alertas ao longo do ano</h4>
                            <div class="wrap-canvas">
                                <canvas id="linhaAnoChart" aria-label="Distribuição no ano" role="img"></canvas>
                            </div>
                        </div>
                    </section>
                </section>
                <section class="sessao-lateral-direita-itens cartao bloco-projecao">
                    <h4 id="proj">Projeção de Sobrecarga dos discos</h4>
                    <div class="tabela-proj">
                        <div class="linha">
                            <span class="srv">SERV-PACS</span>
                            <div class="medidor"><span class="medidor__preench cor-disco" style="width:90%"></span>
                            </div>
                            <span class="uso">90%</span>
                            <span class="data">22/12/2025</span>
                        </div>
                        <div class="linha">
                            <span class="srv">SERV-2</span>
                            <div class="medidor"><span class="medidor__preench cor-ram" style="width:40%"></span></div>
                            <span class="uso">40%</span>
                            <span class="data">22/04/2026</span>
                        </div>
                        <div class="linha">
                            <span class="srv">SERV-3</span>
                            <div class="medidor"><span class="medidor__preench cor-cpu" style="width:20%"></span></div>
                            <span class="uso">20%</span>
                            <span class="data">30/11/2026</span>
                        </div>
                    </div>
                    <div class="barra-vertical"></div>
                </section>
            </section>
        </section>
    </section>
    <script>
        Chart.defaults.font.family = "'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif";
        Chart.defaults.color = "#4b5968";
        const gridColor = "rgba(0,0,0,.06)";

        // Top 5 Servidores (horizontal)
        new Chart(document.getElementById('topServidoresChart'), {
            type: 'bar',
            data: {
                labels: ['SERV-PACS', 'PACS-2', 'PACS-3', 'PACS-4', 'PACS-5'],
                datasets: [{ label: 'Alertas', data: [30, 18, 12, 9, 6], borderRadius: 10, backgroundColor: '#ef7070' }]
            },
            options: {
                indexAxis: 'y',
                plugins: { legend: { display: true, labels: { boxWidth: 10, usePointStyle: true, pointStyle: 'circle' } } },
                scales: {
                    x: { grid: { color: gridColor }, border: { display: false }, ticks: { stepSize: 5 } },
                    y: { grid: { display: false }, border: { display: false } }
                }
            }
        });

        // Componentes (barras)
        new Chart(document.getElementById('componentesChart'), {
            type: 'bar',
            data: {
                labels: ['CPU', 'RAM', 'DISCO'],
                datasets: [{ data: [8, 12, 16], backgroundColor: ['#e4ef2f', '#ffb65e', '#ff6d6d'], borderRadius: 12 }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { display: false }, border: { display: false } },
                    y: { grid: { color: gridColor }, border: { display: false }, beginAtZero: true, ticks: { stepSize: 5 } }
                }
            }
        });

        // Linha anual
        new Chart(document.getElementById('linhaAnoChart'), {
            type: 'line',
            data: {
                labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                datasets: [{ label: 'Alertas', data: [25, 12, 15, 10, 14, 32, 18, 9, 6, 3, 1, 2], borderColor: '#e34a4a', pointBackgroundColor: '#e34a4a', pointRadius: 3.5, fill: false, tension: .35 }]
            },
            options: {
                plugins: { legend: { display: true, labels: { boxWidth: 10, usePointStyle: true, pointStyle: 'circle' } } },
                scales: {
                    x: { grid: { display: false }, border: { display: false } },
                    y: { grid: { color: gridColor }, border: { display: false }, beginAtZero: true }
                }
            }
        });
    </script>

</body>
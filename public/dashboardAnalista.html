<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/dashAnalista.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="js/sessao.js"></script>
</head>

<body onload="carregarInformacoes(), buscarServidores()">

    <nav class="menu">
        <input type="checkbox" name="chk_hamburguer" id="chk_hamburguer" class="check_hamburguer">

        <section class="hamburguer">
            <span class="menu_lateral">
                <div class="icones_topo">
                    <img class="img_hamb" src="assets/LogoVitalView.png">
                    <img src="./assets/dashboard-icons/activity.svg" data-role="Analista,Administrador">
                    <img src="./assets/dashboard-icons/bar-chart.svg" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/layout.svg" data-role="Técnico,Administrador">
                </div>

                <div class="icones_baixo">
                    <img src="./assets/dashboard-icons/gerenciar-usuarios.png" data-role="Administrador"
                        style="width: 28px; height: 28px;">
                    <img src="./assets/dashboard-icons/calendar.svg" data-role="Analista,Técnico,Administrador">
                    <img src="./assets/dashboard-icons/users.svg" data-role="Administrador">
                    <img src="./assets/dashboard-icons/hard-drive.svg" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/help-circle.svg" data-role="Analista,Técnico,Administrador">
                    <img src="./assets/dashboard-icons/log-out.svg" data-role="Analista,Técnico,Administrador">
                </div>
            </span>
        </section>

        <ul>
            <div class="title_hamb">
                <img class="img_hamb" src="assets/LogoVitalView.png" alt="">
                <h2 class="hamb_nome">VitalView</h2>
            </div>
            <div class="menu_topo">
                <h3 class="title_menu">Dashboards</h3>
                <li style="display: flex; align-items: center;" data-role="Analista,Administrador,Técnico">
                    <img src="./assets/dashboard-icons/home.svg" style="width: 20px; margin-right: 4px;"><a
                        href="bemVindo.html">Home</a>
                </li>
                <li style="display: flex; align-items: center;" data-role="Analista,Administrador" class="pagina-ativa">
                    <img src="./assets/dashboard-icons/activity.svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashboardAnalista.html">Dash Analista</a>
                </li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador"><img
                        src="./assets/dashboard-icons/bar-chart.svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashboardSuporteMacro.html">Dash Suporte Macro</a></li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador"><img
                        src="./assets/dashboard-icons/layout.svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashboardSuporteMicro.html">Dash Suporte Micro</a></li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/wifi (1).svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashRede.html">Dashboard Rede</a>
                </li>
            </div>

            <div class="menu_baixo">
                <h3 class="title_menu">Outras Opções</h3>
                <li style="display: flex; align-items: center;" data-role="Administrador"><img
                        src="./assets/dashboard-icons/gerenciar-usuarios.png" style="width: 20px; margin-right: 4px;"><a
                        href="dashControleSistema.html">Gerenciar usuários</a></li>
                <li style="display: flex; align-items: center;" data-role="Analista,Técnico,Administrador"><img
                        src="./assets/dashboard-icons/calendar.svg" style="width: 20px; margin-right: 4px;"><a
                        href="historicoAlertas.html">Histórico de Alertas</a></li>
                <li style="display: flex; align-items: center;" data-role="Administrador"><img
                        src="./assets/dashboard-icons/users.svg" style="width: 20px; margin-right: 4px;"><a
                        href="cadastroFuncionarios.html">Cadastro Funcionário</a></li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador"><img
                        src="./assets/dashboard-icons/hard-drive.svg" style="width: 20px; margin-right: 4px;"><a
                        href="cadastroServidores.html">Cadastro Servidores</a></li>
                <li style="display: flex; align-items: center;" data-role="Analista,Técnico,Administrador"><img
                        src="./assets/dashboard-icons/help-circle.svg" style="width: 20px; margin-right: 4px;"><a
                        href="https://vitalviewsptech.atlassian.net/servicedesk/customer/portal/1"
                        target="_blank">Central de Serviço</a></li>
                <li style="display: flex; align-items: center;" data-role="Analista,Técnico,Administrador"><img
                        src="./assets/dashboard-icons/log-out.svg" style="width: 20px; margin-right: 4px;"><a
                        onclick="limparSessao()">Sair</a></li>
            </div>
        </ul>
    </nav>


    <section class="container">
        <section class="nav-dash">
            <section class="secao_logo">
                <a href="dashboardAnalista.html">
                    <img src="assets/LogoVitalView.png" alt="Logo VitalView" class="logo">
                </a>
            </section>

            <section class="secao_logo">
                <h1 class="titulo_header">VitalView</h1>
            </section>

            <section class="secao_logo">
                <select class="periodo_select" name="periodo" id="periodo_select">
                    <option value="1">Escolher período</option>
                    <option value="2">Hoje</option>
                    <option value="3">Nesta semana</option>
                    <option value="4" selected>Neste mês</option>
                    <option value="6">Neste trimestre</option>
                    <option value="7">Neste semestre</option>
                    <option value="5">Neste ano</option>
                </select>
            </section>
                <section style="display: flex; justify-content: center; margin: 20px 0;">
                    <button onclick="scrollParaPrevisoes()" class="periodo_select">
                        Ver Previsões de Alertas
                    </button>
                </section>
        </section>

        <section class="container-de-sessoes">
            <section class="sessao-lateral-esquerda">
                <section class="sessao-lateral-esquerda-itens">
                    <div class="server-info" role="group" aria-labelledby="t1">
                        <h4 id="t1" class="titulo-cartao" style="text-align: center;">Top 5 Servidores com mais alertas
                            <small>No Mês</small>
                        </h4>
                        <canvas id="topServidoresChart" aria-label="Top servidores" role="img"></canvas>
                    </div>

                    <div class="server-info" role="group" aria-labelledby="t2">
                        <h4 id="t2" class="titulo-cartao" style="text-align: center;">Distribuição de alertas por
                            componente <small>No Mês</small></h4>
                        <canvas id="componentesChart" aria-label="Alertas por componente" role="img"></canvas>
                    </div>
                </section>

            </section>
            <section class="sessao-lateral-direita">
                <section class="sessao-lateral-direita-itens" style="height: 35%;">
                    <section class="velocimetro card">
                        <h4 id="c1" style="text-align: center; font-size: larger;">Dia da semana com mais alertas
                            <br><small>Durante o Mês</small>
                        </h4>
                        <div class="valor grande azul">Segunda-feira</div>
                        <p class="legenda">Dia da semana com maior frequência de alertas</p>
                    </section>
                    <section class="velocimetro card">
                        <h4 id="c2" style="text-align: center; font-size: larger;">Quantidade total de alertas
                            <br><small>Durante o Mês</small>
                        </h4>
                        <div class="valor grande vermelho" style="font-size: 40px; margin-bottom: 20px;">0</div>
                    </section>
                </section>
                <section class="sessao-lateral-direita-itens" id="id_sessao_direita_2">
                    <section id="projecao" style="position: relative;">
                        <div aria-labelledby="lin" style="height: 100%; display: flex; flex-direction: column;">
                            <h4 id="titulo_grafico_linha"
                                style="font-size: larger; text-align: center; margin-bottom: 10px;">Distribuição de
                                alertas no mês</h4>
                            <div style="flex: 1; position: relative; min-height: 0;">
                                <canvas id="linhaAnoChart" aria-label="Distribuição no período" role="img"></canvas>
                            </div>
                        </div>
                    </section>
                </section>
            </section>

        </section>
        <section class="container-previsoes" style="margin-top: 30px;">
            <section class="tabela-previsoes">
                <h4>Previsões Detalhadas por Servidor</h4>
                <div class="table-wrapper">
                    <table id="tabelaPrevisoes">
                        <thead>
                            <tr>
                                <th>Servidor</th>
                                <th>Componente</th>
                                <th>Dia de Risco</th>
                                <th>Período</th>
                                <th>Alertas Previstos</th>
                                <th>Probabilidade</th>
                                <th>Tendência</th>
                                <th>Nível de Risco</th>
                            </tr>
                        </thead>
                        <tbody id="corpoTabelaPrevisoes">
                            <tr>
                                <td colspan="8" style="text-align: center;">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </section>
    </section>

    <script src="js/permissoes.js"></script>

    <script src="js/dashAnalista.js"></script>

</body>
<script>
    function scrollParaPrevisoes() {
    const tabelaPrevisoes = document.querySelector('.container-previsoes');
    if (tabelaPrevisoes) {
        tabelaPrevisoes.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
        });
    }
}
</script>
</html>
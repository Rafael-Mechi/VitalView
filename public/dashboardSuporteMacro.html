<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Suporte</title>
    <link rel="stylesheet" href="css/dashSuporteMacro.css">
    <script src="js/sessao.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
</head>

<body>

    <nav class="menu">
        <input type="checkbox" name="chk_hamburguer" id="chk_hamburguer" class="check_hamburguer">

        <section class="hamburguer">
            <span class="menu_lateral">
                <div class="icones_topo">
                    <img class="img_hamb" src="assets/LogoVitalView.png">
                    <img src="./assets/dashboard-icons/home.svg" data-role="Analista,Administrador,Técnico">
                    <img src="./assets/dashboard-icons/activity.svg" data-role="Analista,Administrador">
                    <img src="./assets/dashboard-icons/bar-chart.svg" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/layout.svg" data-role="Técnico,Administrador">
                </div>

                <div class="icones_baixo">
                    <img src="./assets/dashboard-icons/gerenciar-usuarios.png" data-role="Administrador"
                        style="width: 28px; height: 28px;">
                    <img src="./assets/dashboard-icons/calendar.svg" data-role="Analista,Técnico,Administrador">
                    <img src="./assets/dashboard-icons/users.svg" data-role="Administrador">
                    <img src="./assets/dashboard-icons/hard-drive.svg" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/help-circle.svg" data-role="Analista,Técnico,Administrador">
                    <img src="./assets/dashboard-icons/log-out.svg" data-role="Analista,Técnico,Administrador">
                </div>
            </span>
        </section>

        <ul>
            <div class="title_hamb">
                <img class="img_hamb" src="assets/LogoVitalView.png" alt="">
                <h2 class="hamb_nome">VitalView</h2>
            </div>
            <div class="menu_topo">
                <h3 class="title_menu">Dashboards</h3>
                <li style="display: flex; align-items: center;" data-role="Analista,Administrador,Técnico">
                    <img src="./assets/dashboard-icons/home.svg" style="width: 20px; margin-right: 4px;"><a
                        href="bemVindo.html">Home</a>
                </li>
                <li style="display: flex; align-items: center;" data-role="Analista,Administrador"><img
                        src="./assets/dashboard-icons/activity.svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashboardAnalista.html">Dash Analista</a></li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador" class="pagina-ativa">
                    <img src="./assets/dashboard-icons/bar-chart.svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashboardSuporteMacro.html">Dash Suporte Macro</a>
                </li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/layout.svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashboardSuporteMicro.html">Dash Suporte Micro</a>
                </li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador">
                    <img src="./assets/dashboard-icons/wifi (1).svg" style="width: 20px; margin-right: 4px;"><a
                        href="dashRede.html">Dashboard Rede</a>
                </li>
            </div>

            <div class="menu_baixo">
                <h3 class="title_menu">Outras Opções</h3>
                <li style="display: flex; align-items: center;" data-role="Administrador"><img
                        src="./assets/dashboard-icons/gerenciar-usuarios.png" style="width: 20px; margin-right: 4px;"><a
                        href="dashControleSistema.html">Gerenciar usuários</a></li>
                <li style="display: flex; align-items: center;" data-role="Analista,Técnico,Administrador"><img
                        src="./assets/dashboard-icons/calendar.svg" style="width: 20px; margin-right: 4px;"><a
                        href="historicoAlertas.html">Histórico de Alertas</a></li>
                <li style="display: flex; align-items: center;" data-role="Administrador"><img
                        src="./assets/dashboard-icons/users.svg" style="width: 20px; margin-right: 4px;"><a
                        href="cadastroFuncionarios.html">Cadastro Funcionário</a></li>
                <li style="display: flex; align-items: center;" data-role="Técnico,Administrador"><img
                        src="./assets/dashboard-icons/hard-drive.svg" style="width: 20px; margin-right: 4px;"><a
                        href="cadastroServidores.html">Cadastro Servidores</a></li>
                <li style="display: flex; align-items: center;" data-role="Analista,Técnico,Administrador"><img
                        src="./assets/dashboard-icons/help-circle.svg" style="width: 20px; margin-right: 4px;"><a
                        href="https://vitalviewsptech.atlassian.net/servicedesk/customer/portal/1"
                        target="_blank">Central de Serviço</a></li>
                <li style="display: flex; align-items: center;" data-role="Analista,Técnico,Administrador"><img
                        src="./assets/dashboard-icons/log-out.svg" style="width: 20px; margin-right: 4px;"><a
                        onclick="limparSessao()">Sair</a></li>
            </div>
        </ul>
    </nav>

    <section class="container">
        <section class="nav-dash">
            <section class="secao_logo">
                <a href="dashboardAnalista.html">
                    <img src="assets/LogoVitalView.png" alt="Logo VitalView" class="logo">
                </a>
            </section>

            <section class="secao_logo">
                <h1 class="titulo_header" style="margin-left: 10px;">VitalView</h1>
            </section>
        </section>

        <div class="wrap">
            <section class="kpis">
                <div class="kpi">
                    <div class="kpi-title-container">
                        <p>Servidores em Risco</p>
                        <button type="button" class="infoBtn" data-target="infoModalRisco">&#9432</button>
                    </div>
                    <div class="kpi-value" id="valor-risco">0<span
                            style="font-size: 1.2rem; color: var(--vv-muted);">/0</span></div>
                    <p class="kpi-sub">Monitoramento ativo</p>
                </div>

                <div class="kpi">
                    <div class="kpi-title-container">
                        <p>Alertas</p>
                        <button type="button" class="infoBtn" data-target="infoModalAlertas">&#9432</button>
                    </div>
                    <select class="filtro-alertas" onchange="alterarFiltroAlertas(this.value)">
                        <option value="geral">Geral</option>
                        <option value="tendencia">Tendência 24h</option>
                    </select>
                    <div class="kpi-value" id="valor-alertas">0</div>
                    <p class="kpi-sub" id="subtitulo-alertas">Total de ocorrências</p>
                </div>

                <div class="kpi" id="kpi-uso-disco">
                    <canvas class="card_grafico_disco" id="graficoPizza"
                        style="width: 100%; height: 100%; padding-bottom: 10px; padding-right: 10px;"></canvas>
                </div>
            </section>

            <!-- Modais de Informação -->
            <div id="infoModalRisco" class="modal">
                <div class="modal-content">
                    <h3>Servidores em Risco</h3>
                    <p style="text-align: justify;">
                        Mostra quantos servidores estão atualmente em estado de <b>alerta</b>
                        em relação ao total monitorado. Um servidor é considerado em alerta quando
                        um ou mais componentes (CPU, RAM, Disco) ultrapassam os limites configurados.
                    </p>
                    <button type="button" class="closeBtn">Fechar</button>
                </div>
            </div>

            <div id="infoModalAlertas" class="modal">
                <div class="modal-content">
                    <h3>Alertas do Sistema</h3>
                    <p style="text-align: justify;">
                        <b>Modo Geral:</b> Mostra a quantidade de <b>alertas ativos no momento</b> em todos os
                        servidores
                        do seu hospital. Reflete a situação atual dos sistemas - se houver 0, significa que não tem
                        nenhum servidor em alerta, ou que todos os alertas
                        foram resolvidos.
                        <br><br>
                        <b>Modo Tendência 24h:</b> Mostra quantos <b>novos alertas surgiram nas últimas 24 horas</b> e a
                        <b>variação (▲▼)</b> em relação ao período anterior. Ajuda a identificar picos de problemas e
                        a eficiência das ações preventivas.
                        <br><br>
                        Use o filtro para alternar entre <b>situação atual (Geral)</b> e <b>análise de novos eventos
                            (Tendência)</b>.
                    </p>
                    <button type="button" class="closeBtn">Fechar</button>
                </div>
            </div>

            <div id="infoModalDisco" class="modal">
                <div class="modal-content">
                    <h3>Distribuição de Status</h3>
                    <p style="text-align: justify;">
                        Este gráfico mostra a <b>proporção de servidores</b> que estão em alerta versus
                        os que estão operando normalmente. Ajuda a identificar rapidamente se os problemas
                        estão concentrados em poucos servidores ou são generalizados.
                        <br><br>
                        <b>Vermelho:</b> Servidores com alertas ativos<br>
                        <b>Azul:</b> Servidores operando normalmente
                    </p>
                    <button type="button" class="closeBtn">Fechar</button>
                </div>
            </div>

            <section class="tabela-servidores">
                <div class="tabela-header">
                    <nav class="abas">
                        <img src="assets/imgs/filtro.png">
                        <a href="#" class="aba ativa" data-filtro="todos">Todos</a>
                        <a href="#" class="aba" data-filtro="alerta">Em Alerta</a>
                        <a href="#" class="aba" data-filtro="cpu">Maior CPU</a>
                        <a href="#" class="aba" data-filtro="ram">Maior RAM</a>
                        <a href="#" class="aba" data-filtro="disco">Maior Disco</a>
                        <a href="#" class="aba" data-filtro="alertas">Mais Alertas</a>
                    </nav>
                    <div class="tabela-acao">
                        <h3 class="total-servidores">Servidores Cadastrados: <span class="badge-total">0</span></h3>
                        <div class="campo-pesquisa">
                            <input type="text" placeholder="Pesquisar servidores..." class="input-pesquisa">
                            <button class="btn-pesquisa"><img src="assets/dashboard-icons/search.svg"
                                    alt="Pesquisar"></button>
                        </div>
                        <a href="cadastroServidores.html" class="btn-novo">Novo +</a>
                    </div>
                </div>

                <div class="tabela-corpo">
                    <table>
                        <thead>
                            <tr>
                                <th>Servidor</th>
                                <th>Status</th>
                                <th>Uso de CPU%</th>
                                <th>Uso de RAM%</th>
                                <th>Uso de Disco%</th>
                                <th>Alertas</th>
                                <th>Tempo em Alerta</th>
                                <th>Status de rede</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr id="loading-row">
                                <td colspan="9" style="text-align: center; padding: 40px;">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                                        <div>Carregando dados dos servidores...</div>
                                        <div style="font-size: 12px; color: #666;">Os dados serão atualizados
                                            automaticamente</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </section>

    <script src="js/dashSuporteMacro.js"></script>

</body>

</html>